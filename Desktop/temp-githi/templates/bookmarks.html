<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c2c54" />
    <title>ë‚´ ë¶ë§ˆí¬ - ê¹ƒí•˜ì´ë¼ì´íŠ¸</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="header-container">
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            <div class="logo-section">
                <h1><a href="/" class="logo-link">ğŸŒŸ ê¹ƒí•˜ì´ë¼ì´íŠ¸</a></h1>
                <p>ë‚´ ë¶ë§ˆí¬ ëª©ë¡</p>
            </div>
            <nav class="main-nav" id="mainNav">
                <ul>
                    <li><a href="/" title="í™ˆìœ¼ë¡œ"><i class="fas fa-home"></i> í™ˆ</a></li>
                    <li><a href="/about" title="ì‚¬ì´íŠ¸ ì†Œê°œ"><i class="fas fa-info-circle"></i> ì†Œê°œ</a></li>
                    <li class="active"><a href="/bookmarks" title="ë‚´ ë¶ë§ˆí¬"><i class="fas fa-bookmark"></i> ë‚´ ë¶ë§ˆí¬</a></li>
                    <li><a href="/logout" title="ë¡œê·¸ì•„ì›ƒ"><i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        {% if not bookmarks %}
            <div class="no-bookmarks">
                <p>ì €ì¥ëœ ë¶ë§ˆí¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                <a href="{{ url_for('index') }}" class="btn">íŠ¸ë Œë”© í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°</a>
            </div>
        {% else %}
            {% for bookmark in bookmarks %}
            <section class="card" id="bookmark-{{ bookmark.id }}">
                <h2><a href="{{ bookmark.repo_link }}" target="_blank">{{ bookmark.repo_name }}</a></h2>
                <div class="stars-container">
                    <span class="stars"><i class="fas fa-star"></i> {{ bookmark.repo_stars }}</span>
                </div>
                <div class="summary-section">
                    <p><strong class="summary-label">ìš”ì•½:</strong> {{ bookmark.repo_summary }}</p>
                    <p><strong class="feature-label">ê¸°ëŠ¥:</strong> {{ bookmark.repo_feature }}</p>
                </div>
                {% if bookmark.repo_code and bookmark.repo_code != "ì½”ë“œ ì˜ˆì‹œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" %}
                <pre><code>{{ bookmark.repo_code }}</code></pre>
                {% endif %}
                <div class="card-actions">
                    <button class="bookmark-btn remove" data-bookmark-id="{{ bookmark.id }}">
                        <i class="fas fa-trash-alt"></i> ë¶ë§ˆí¬ ì‚­ì œ
                    </button>
                </div>
            </section>
            {% endfor %}
        {% endif %}
    </main>

    <footer>
        <p>&copy; ê¹ƒí•˜ì´ë¼ì´íŠ¸ 2025 | <a href="https://github.com" target="_blank">GitHub</a>ì—ì„œ ë°œê²¬ëœ ë³´ì„ë“¤</p>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // í–„ë²„ê±° ë©”ë‰´ í† ê¸€
            const menuToggle = document.getElementById('menuToggle');
            const mainNav = document.getElementById('mainNav');
            
            menuToggle.addEventListener('click', function() {
                mainNav.classList.toggle('active');
            });
            
            // ë¶ë§ˆí¬ ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.querySelectorAll('.bookmark-btn.remove').forEach(btn => {
                btn.addEventListener('click', function() {
                    const bookmarkId = this.dataset.bookmarkId;
                    removeBookmark(bookmarkId);
                });
            });
            
            // ë‹¤í¬ ëª¨ë“œ ê°ì§€
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.body.classList.add('dark-mode');
            }
            
            // ìŠ¤í¬ë¡¤ ì‹œ í—¤ë” ìƒ‰ìƒ ë³€ê²½
            window.addEventListener('scroll', function() {
                const header = document.querySelector('header');
                if (window.scrollY > 10) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
        });
        
        // ë¶ë§ˆí¬ ì‚­ì œ í•¨ìˆ˜
        function removeBookmark(bookmarkId) {
            fetch(`/bookmark/${bookmarkId}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const bookmarkElement = document.getElementById(`bookmark-${bookmarkId}`);
                    bookmarkElement.style.opacity = 0;
                    setTimeout(() => {
                        bookmarkElement.remove();
                        
                        // ë¶ë§ˆí¬ê°€ ë” ì´ìƒ ì—†ëŠ”ì§€ í™•ì¸
                        if (document.querySelectorAll('.card').length === 0) {
                            location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ "ë¶ë§ˆí¬ ì—†ìŒ" ë©”ì‹œì§€ í‘œì‹œ
                        }
                    }, 300);
                } else {
                    alert('ë¶ë§ˆí¬ ì‚­ì œ ì‹¤íŒ¨: ' + data.message);
                }
            })
            .catch(error => {
                console.error('ë¶ë§ˆí¬ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                alert('ë¶ë§ˆí¬ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            });
        }
    </script>
</body>
</html>
