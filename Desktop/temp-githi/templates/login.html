<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#2c2c54" />
  
  <!-- SEO 메타 태그 -->
  <title>로그인 - 깃하이라이트 | GitHub 인기 프로젝트 한글 요약 서비스</title>
  <meta name="description" content="깃하이라이트 로그인 페이지입니다. 로그인하여 GitHub 인기 프로젝트 북마크 기능을 이용하고 나만의 컬렉션을 만들어보세요." />
  <meta name="keywords" content="GitHub, 깃허브, 오픈소스, 로그인, 북마크, 코드, 프로그래밍, 개발자, 트렌드, 요약, 한글" />
  <meta name="author" content="깃하이라이트" />
  <meta name="robots" content="noindex, follow" />
  
  <!-- 표준 링크 태그 -->
  <link rel="canonical" href="https://githi.com/login" />
  <link rel="alternate" hreflang="ko" href="https://githi.com/login" />
  
  <!-- 파비콘 설정 -->
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/static/icons/192x192.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="/static/icons/192x192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="/static/icons/592x592.png" />
  
  <!-- Open Graph 메타 태그 (페이스북, 카카오톡 등) -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://githi.com/login" />
  <meta property="og:title" content="로그인 - 깃하이라이트" />
  <meta property="og:description" content="깃하이라이트에 로그인하여 GitHub 인기 프로젝트 북마크 기능을 이용하고 나만의 컬렉션을 만들어보세요." />
  <meta property="og:image" content="https://githi.com/static/icons/592x592.png" />
  <meta property="og:site_name" content="깃하이라이트" />
  <meta property="og:locale" content="ko_KR" />
  
  <!-- Twitter Card 메타 태그 -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="로그인 - 깃하이라이트" />
  <meta name="twitter:description" content="깃하이라이트에 로그인하여 GitHub 인기 프로젝트 북마크 기능을 이용하고 나만의 컬렉션을 만들어보세요." />
  <meta name="twitter:image" content="https://githi.com/static/icons/592x592.png" />
  
  <!-- PWA 관련 메타 태그 -->
  <link rel="manifest" href="/static/manifest.json" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="apple-mobile-web-app-title" content="깃하이라이트" />
  
  <link rel="stylesheet" href="/static/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
</head>
<body>
  <header>
    <div class="header-container">
      <div class="logo-section">
        <h1><a href="/" class="logo-link"> 깃하이라이트</a></h1>
      </div>
      
      <button class="toggle-menu" id="menuToggle">
        <i class="fas fa-bars"></i>
      </button>
      
      <nav class="main-nav" id="mainNav">
        <ul>
          <li><a href="/about" title="사이트 소개"><i class="fas fa-info-circle"></i> 소개</a></li>
          <li><a href="/login" title="로그인" class="active"><i class="fas fa-sign-in-alt"></i> 로그인</a></li>
          <li><a href="/register" class="register-btn" title="회원가입"><i class="fas fa-user-plus"></i> 회원가입</a></li>
          <li class="mobile-only" id="install-app-menu-item" style="display: none;">
            <button id="install-button" class="menu-button">
              <i class="fas fa-download"></i> 앱 설치
            </button>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  <main>
    <div class="auth-container">
      <div class="auth-card">
        <h2>로그인</h2>
        
        {% if error %}
        <div class="alert alert-error">
          <i class="fas fa-exclamation-circle"></i> {{ error }}
        </div>
        {% endif %}
        
        <form action="/login" method="post" class="auth-form">
          <div class="form-group">
            <label for="username">아이디</label>
            <input type="text" id="username" name="username" required value="{{ username if username else '' }}">
          </div>
          
          <div class="form-group">
            <label for="password">비밀번호</label>
            <input type="password" id="password" name="password" required>
          </div>
          
          <div class="form-check">
            <input type="checkbox" id="remember" name="remember" {% if remember %}checked{% endif %}>
            <label for="remember">아이디 저장하기</label>
          </div>
          
          <div class="form-actions">
            <button type="submit" class="btn btn-primary">로그인</button>
          </div>
        </form>
        
        <div class="auth-links">
          <p>계정이 없으신가요? <a href="/register">회원가입</a></p>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <p>&copy; 깃하이라이트 2025 | <a href="https://github.com" target="_blank">GitHub</a>에서 발견된 보석들</p>
  </footer>
  
  <script>
    // 모바일 기기 감지 함수
    function isMobileDevice() {
      return (window.innerWidth <= 768) || 
             /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      // 앱 설치 관련 변수
      let deferredPrompt;
      const installButton = document.getElementById('install-button');
      const installMenuItem = document.getElementById('install-app-menu-item');
      const menuToggle = document.getElementById('menuToggle');
      const mainNav = document.getElementById('mainNav');
      
      // 모바일에서만 메뉴 항목 표시
      if (installMenuItem) {
        if (isMobileDevice()) {
          installMenuItem.style.display = 'block';
        } else {
          installMenuItem.style.display = 'none';
        }
      }
      
      // 화면 크기 변경 감지
      window.addEventListener('resize', function() {
        if (installMenuItem) {
          if (isMobileDevice()) {
            installMenuItem.style.display = 'block';
          } else {
            installMenuItem.style.display = 'none';
          }
        }
      });
      
      // 햄버거 메뉴 토글 기능
      if (menuToggle && mainNav) {
        menuToggle.addEventListener('click', function() {
          mainNav.classList.toggle('active');
          
          // 아이콘 변경 (X 또는 햄버거)
          const icon = this.querySelector('i');
          if (mainNav.classList.contains('active')) {
            icon.classList.remove('fa-bars');
            icon.classList.add('fa-times');
          } else {
            icon.classList.remove('fa-times');
            icon.classList.add('fa-bars');
          }
        });
      }
      
      // 앱 설치 프롬프트 캐치
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        // 설치 버튼 이벤트 리스너 추가
        if (installButton) {
          installButton.addEventListener('click', async () => {
            if (!deferredPrompt) {
              alert('설치 프롬프트를 사용할 수 없습니다. 이미 설치되었거나 브라우저가 지원하지 않을 수 있습니다.');
              return;
            }
            
            // 설치 프롬프트 표시
            deferredPrompt.prompt();
            
            // 사용자 응답 대기
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`사용자 선택: ${outcome}`);
            
            // deferredPrompt 초기화
            deferredPrompt = null;
            
            // 설치 완료 또는 취소 후 메뉴 항목 숨기기
            if (installMenuItem) {
              installMenuItem.style.display = 'none';
            }
          });
        }
      });
      
      // 앱이 이미 설치된 경우 메뉴 항목 숨기기
      if (window.matchMedia('(display-mode: standalone)').matches || 
          window.navigator.standalone === true) {
        console.log('앱 모드로 실행 중입니다!');
        if (installMenuItem) {
          installMenuItem.style.display = 'none';
        }
      }
      
      // 앱 설치 완료 감지
      window.addEventListener('appinstalled', () => {
        console.log('앱이 성공적으로 설치되었습니다!');
        deferredPrompt = null;
        if (installMenuItem) {
          installMenuItem.style.display = 'none';
        }
      });
    });
  </script>
  
  <!-- PWA 서비스 워커 등록 -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/static/service-worker.js')
          .then(registration => {
            console.log('서비스 워커가 성공적으로 등록되었습니다:', registration.scope);
          })
          .catch(error => {
            console.error('서비스 워커 등록 실패:', error);
          });
      });
    }
  </script>
</body>
</html>
